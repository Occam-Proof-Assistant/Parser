'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Graph = require('../graph'),
    RightRecursiveProduction = require('../common/production/rightRecursive'),
    PossiblyCyclicProduction = require('../common/production/possiblyCyclic'),
    NonLeftRecursiveProduction = require('../common/production/nonLeftRecursive'),
    NonImplicitlyLeftRecursiveProduction = require('../common/production/nonImplicitlyLeftRecursive');

var parserUtil = function () {
  function parserUtil() {
    _classCallCheck(this, parserUtil);
  }

  _createClass(parserUtil, null, [{
    key: 'tokensFromLines',
    value: function tokensFromLines(lines) {
      var tokens = lines.reduce(function (tokens, line) {
        var lineTokens = line.getTokens();

        tokens = tokens.concat(lineTokens);

        return tokens;
      }, []);

      return tokens;
    }
  }, {
    key: 'eliminateCycles',
    value: function eliminateCycles(productions) {
      var possiblyCyclicProductions = possiblyCyclicProductionsFromProductions(productions),
          graph = graphFromPossiblyCyclicProductions(possiblyCyclicProductions),
          cycles = graph.getCycles();

      debugger;

      return productions;
    }
  }, {
    key: 'eliminateLeftRecursion',
    value: function eliminateLeftRecursion(productions) {
      var nonLeftRecursiveProductions = [],
          rightRecursiveProductions = [];

      productions.forEach(function (production, index) {
        var begin = 0,
            end = index,
            ///
        previousNonLeftRecursiveProductions = nonLeftRecursiveProductions.slice(begin, end),
            previousProductions = previousNonLeftRecursiveProductions,
            ///
        productionImplicitlyLeftRecursive = production.isImplicitlyLeftRecursive(previousProductions);

        if (productionImplicitlyLeftRecursive) {
          var nonImplicitlyLeftRecursiveProduction = NonImplicitlyLeftRecursiveProduction.fromProductionAndPreviousProductions(production, previousProductions);

          production = nonImplicitlyLeftRecursiveProduction; ///
        }

        var productionLeftRecursive = production.isLeftRecursive();

        if (productionLeftRecursive) {
          var nonLeftRecursiveProduction = NonLeftRecursiveProduction.fromProduction(production),
              rightRecursiveProduction = RightRecursiveProduction.fromProduction(production);

          nonLeftRecursiveProductions.push(nonLeftRecursiveProduction);

          rightRecursiveProductions.push(rightRecursiveProduction);
        } else {
          var _nonLeftRecursiveProduction = production; ///

          nonLeftRecursiveProductions.push(_nonLeftRecursiveProduction);
        }
      });

      productions = [].concat(nonLeftRecursiveProductions).concat(rightRecursiveProductions);

      return productions;
    }
  }]);

  return parserUtil;
}();

module.exports = parserUtil;

function possiblyCyclicProductionsFromProductions(productions) {
  var possiblyCyclicProductions = productions.reduce(function (possiblyCyclicProductions, production) {
    var possiblyCyclicProduction = PossiblyCyclicProduction.fromProduction(production);

    if (possiblyCyclicProduction !== null) {
      possiblyCyclicProductions.push(possiblyCyclicProduction);
    }

    return possiblyCyclicProductions;
  }, []);

  return possiblyCyclicProductions;
}

function graphFromPossiblyCyclicProductions(possiblyCyclicProductions) {
  var graph = new Graph();

  possiblyCyclicProductions.forEach(function (possiblyCyclicProduction) {
    var possiblyCyclicProductionName = possiblyCyclicProduction.getName(),
        possiblyCyclicProductionRulesProductionNames = possiblyCyclicProduction.getRulesProductionNames(),
        vertexName = possiblyCyclicProductionName,
        ///
    descendantVertexNames = possiblyCyclicProductionRulesProductionNames; ///

    graph.addVertex(vertexName, descendantVertexNames);
  });

  return graph;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsL3BhcnNlci5qcyJdLCJuYW1lcyI6WyJHcmFwaCIsInJlcXVpcmUiLCJSaWdodFJlY3Vyc2l2ZVByb2R1Y3Rpb24iLCJQb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb24iLCJOb25MZWZ0UmVjdXJzaXZlUHJvZHVjdGlvbiIsIk5vbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUHJvZHVjdGlvbiIsInBhcnNlclV0aWwiLCJsaW5lcyIsInRva2VucyIsInJlZHVjZSIsImxpbmUiLCJsaW5lVG9rZW5zIiwiZ2V0VG9rZW5zIiwiY29uY2F0IiwicHJvZHVjdGlvbnMiLCJwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb25zIiwicG9zc2libHlDeWNsaWNQcm9kdWN0aW9uc0Zyb21Qcm9kdWN0aW9ucyIsImdyYXBoIiwiZ3JhcGhGcm9tUG9zc2libHlDeWNsaWNQcm9kdWN0aW9ucyIsImN5Y2xlcyIsImdldEN5Y2xlcyIsIm5vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9ucyIsInJpZ2h0UmVjdXJzaXZlUHJvZHVjdGlvbnMiLCJmb3JFYWNoIiwicHJvZHVjdGlvbiIsImluZGV4IiwiYmVnaW4iLCJlbmQiLCJwcmV2aW91c05vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9ucyIsInNsaWNlIiwicHJldmlvdXNQcm9kdWN0aW9ucyIsInByb2R1Y3Rpb25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZSIsImlzSW1wbGljaXRseUxlZnRSZWN1cnNpdmUiLCJub25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb24iLCJmcm9tUHJvZHVjdGlvbkFuZFByZXZpb3VzUHJvZHVjdGlvbnMiLCJwcm9kdWN0aW9uTGVmdFJlY3Vyc2l2ZSIsImlzTGVmdFJlY3Vyc2l2ZSIsIm5vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9uIiwiZnJvbVByb2R1Y3Rpb24iLCJyaWdodFJlY3Vyc2l2ZVByb2R1Y3Rpb24iLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyIsInBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbiIsInBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbk5hbWUiLCJnZXROYW1lIiwicG9zc2libHlDeWNsaWNQcm9kdWN0aW9uUnVsZXNQcm9kdWN0aW9uTmFtZXMiLCJnZXRSdWxlc1Byb2R1Y3Rpb25OYW1lcyIsInZlcnRleE5hbWUiLCJkZXNjZW5kYW50VmVydGV4TmFtZXMiLCJhZGRWZXJ0ZXgiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFFQSxJQUFNQSxRQUFRQyxRQUFRLFVBQVIsQ0FBZDtBQUFBLElBQ01DLDJCQUEyQkQsUUFBUSxxQ0FBUixDQURqQztBQUFBLElBRU1FLDJCQUEyQkYsUUFBUSxxQ0FBUixDQUZqQztBQUFBLElBR01HLDZCQUE2QkgsUUFBUSx1Q0FBUixDQUhuQztBQUFBLElBSU1JLHVDQUF1Q0osUUFBUSxpREFBUixDQUo3Qzs7SUFNTUssVTs7Ozs7OztvQ0FDbUJDLEssRUFBTztBQUM1QixVQUFNQyxTQUFTRCxNQUFNRSxNQUFOLENBQWEsVUFBU0QsTUFBVCxFQUFpQkUsSUFBakIsRUFBdUI7QUFDakQsWUFBTUMsYUFBYUQsS0FBS0UsU0FBTCxFQUFuQjs7QUFFQUosaUJBQVNBLE9BQU9LLE1BQVAsQ0FBY0YsVUFBZCxDQUFUOztBQUVBLGVBQU9ILE1BQVA7QUFDRCxPQU5jLEVBTVosRUFOWSxDQUFmOztBQVFBLGFBQU9BLE1BQVA7QUFDRDs7O29DQUVzQk0sVyxFQUFhO0FBQ2xDLFVBQU1DLDRCQUE0QkMseUNBQXlDRixXQUF6QyxDQUFsQztBQUFBLFVBQ01HLFFBQVFDLG1DQUFtQ0gseUJBQW5DLENBRGQ7QUFBQSxVQUVNSSxTQUFTRixNQUFNRyxTQUFOLEVBRmY7O0FBSUE7O0FBRUEsYUFBT04sV0FBUDtBQUNEOzs7MkNBRTZCQSxXLEVBQWE7QUFDekMsVUFBTU8sOEJBQThCLEVBQXBDO0FBQUEsVUFDTUMsNEJBQTRCLEVBRGxDOztBQUdBUixrQkFBWVMsT0FBWixDQUFvQixVQUFTQyxVQUFULEVBQXFCQyxLQUFyQixFQUE0QjtBQUM5QyxZQUFNQyxRQUFRLENBQWQ7QUFBQSxZQUNNQyxNQUFNRixLQURaO0FBQUEsWUFDb0I7QUFDZEcsOENBQXNDUCw0QkFBNEJRLEtBQTVCLENBQWtDSCxLQUFsQyxFQUF5Q0MsR0FBekMsQ0FGNUM7QUFBQSxZQUdNRyxzQkFBc0JGLG1DQUg1QjtBQUFBLFlBR2tFO0FBQzVERyw0Q0FBb0NQLFdBQVdRLHlCQUFYLENBQXFDRixtQkFBckMsQ0FKMUM7O0FBTUEsWUFBSUMsaUNBQUosRUFBdUM7QUFDckMsY0FBTUUsdUNBQXVDNUIscUNBQXFDNkIsb0NBQXJDLENBQTBFVixVQUExRSxFQUFzRk0sbUJBQXRGLENBQTdDOztBQUVBTix1QkFBYVMsb0NBQWIsQ0FIcUMsQ0FHZTtBQUNyRDs7QUFFRCxZQUFNRSwwQkFBMEJYLFdBQVdZLGVBQVgsRUFBaEM7O0FBRUEsWUFBSUQsdUJBQUosRUFBNkI7QUFDM0IsY0FBTUUsNkJBQTZCakMsMkJBQTJCa0MsY0FBM0IsQ0FBMENkLFVBQTFDLENBQW5DO0FBQUEsY0FDTWUsMkJBQTJCckMseUJBQXlCb0MsY0FBekIsQ0FBd0NkLFVBQXhDLENBRGpDOztBQUdBSCxzQ0FBNEJtQixJQUE1QixDQUFpQ0gsMEJBQWpDOztBQUVBZixvQ0FBMEJrQixJQUExQixDQUErQkQsd0JBQS9CO0FBQ0QsU0FQRCxNQU9PO0FBQ0wsY0FBTUYsOEJBQTZCYixVQUFuQyxDQURLLENBQzJDOztBQUVoREgsc0NBQTRCbUIsSUFBNUIsQ0FBaUNILDJCQUFqQztBQUNEO0FBQ0YsT0EzQkQ7O0FBNkJBdkIsb0JBQWMsR0FBR0QsTUFBSCxDQUFVUSwyQkFBVixFQUF1Q1IsTUFBdkMsQ0FBOENTLHlCQUE5QyxDQUFkOztBQUVBLGFBQU9SLFdBQVA7QUFDRDs7Ozs7O0FBR0gyQixPQUFPQyxPQUFQLEdBQWlCcEMsVUFBakI7O0FBRUEsU0FBU1Usd0NBQVQsQ0FBa0RGLFdBQWxELEVBQStEO0FBQzdELE1BQU1DLDRCQUE0QkQsWUFBWUwsTUFBWixDQUFtQixVQUFTTSx5QkFBVCxFQUFvQ1MsVUFBcEMsRUFBZ0Q7QUFDbkcsUUFBTW1CLDJCQUEyQnhDLHlCQUF5Qm1DLGNBQXpCLENBQXdDZCxVQUF4QyxDQUFqQzs7QUFFQSxRQUFJbUIsNkJBQTZCLElBQWpDLEVBQXVDO0FBQ3JDNUIsZ0NBQTBCeUIsSUFBMUIsQ0FBK0JHLHdCQUEvQjtBQUNEOztBQUVELFdBQU81Qix5QkFBUDtBQUNELEdBUmlDLEVBUS9CLEVBUitCLENBQWxDOztBQVVBLFNBQU9BLHlCQUFQO0FBQ0Q7O0FBRUQsU0FBU0csa0NBQVQsQ0FBNENILHlCQUE1QyxFQUF1RTtBQUNyRSxNQUFNRSxRQUFRLElBQUlqQixLQUFKLEVBQWQ7O0FBRUFlLDRCQUEwQlEsT0FBMUIsQ0FBa0MsVUFBU29CLHdCQUFULEVBQW1DO0FBQ25FLFFBQU1DLCtCQUErQkQseUJBQXlCRSxPQUF6QixFQUFyQztBQUFBLFFBQ01DLCtDQUErQ0gseUJBQXlCSSx1QkFBekIsRUFEckQ7QUFBQSxRQUVNQyxhQUFhSiw0QkFGbkI7QUFBQSxRQUVrRDtBQUM1Q0ssNEJBQXdCSCw0Q0FIOUIsQ0FEbUUsQ0FJUzs7QUFFNUU3QixVQUFNaUMsU0FBTixDQUFnQkYsVUFBaEIsRUFBNEJDLHFCQUE1QjtBQUNELEdBUEQ7O0FBU0EsU0FBT2hDLEtBQVA7QUFDRCIsImZpbGUiOiJwYXJzZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IEdyYXBoID0gcmVxdWlyZSgnLi4vZ3JhcGgnKSxcbiAgICAgIFJpZ2h0UmVjdXJzaXZlUHJvZHVjdGlvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9wcm9kdWN0aW9uL3JpZ2h0UmVjdXJzaXZlJyksXG4gICAgICBQb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb24gPSByZXF1aXJlKCcuLi9jb21tb24vcHJvZHVjdGlvbi9wb3NzaWJseUN5Y2xpYycpLFxuICAgICAgTm9uTGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb24gPSByZXF1aXJlKCcuLi9jb21tb24vcHJvZHVjdGlvbi9ub25MZWZ0UmVjdXJzaXZlJyksXG4gICAgICBOb25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb24gPSByZXF1aXJlKCcuLi9jb21tb24vcHJvZHVjdGlvbi9ub25JbXBsaWNpdGx5TGVmdFJlY3Vyc2l2ZScpO1xuXG5jbGFzcyBwYXJzZXJVdGlsIHtcbiAgc3RhdGljIHRva2Vuc0Zyb21MaW5lcyhsaW5lcykge1xuICAgIGNvbnN0IHRva2VucyA9IGxpbmVzLnJlZHVjZShmdW5jdGlvbih0b2tlbnMsIGxpbmUpIHtcbiAgICAgIGNvbnN0IGxpbmVUb2tlbnMgPSBsaW5lLmdldFRva2VucygpO1xuXG4gICAgICB0b2tlbnMgPSB0b2tlbnMuY29uY2F0KGxpbmVUb2tlbnMpO1xuXG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH1cblxuICBzdGF0aWMgZWxpbWluYXRlQ3ljbGVzKHByb2R1Y3Rpb25zKSB7XG4gICAgY29uc3QgcG9zc2libHlDeWNsaWNQcm9kdWN0aW9ucyA9IHBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbnNGcm9tUHJvZHVjdGlvbnMocHJvZHVjdGlvbnMpLFxuICAgICAgICAgIGdyYXBoID0gZ3JhcGhGcm9tUG9zc2libHlDeWNsaWNQcm9kdWN0aW9ucyhwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb25zKSxcbiAgICAgICAgICBjeWNsZXMgPSBncmFwaC5nZXRDeWNsZXMoKTtcblxuICAgIGRlYnVnZ2VyXG5cbiAgICByZXR1cm4gcHJvZHVjdGlvbnM7XG4gIH1cblxuICBzdGF0aWMgZWxpbWluYXRlTGVmdFJlY3Vyc2lvbihwcm9kdWN0aW9ucykge1xuICAgIGNvbnN0IG5vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9ucyA9IFtdLFxuICAgICAgICAgIHJpZ2h0UmVjdXJzaXZlUHJvZHVjdGlvbnMgPSBbXTtcblxuICAgIHByb2R1Y3Rpb25zLmZvckVhY2goZnVuY3Rpb24ocHJvZHVjdGlvbiwgaW5kZXgpIHtcbiAgICAgIGNvbnN0IGJlZ2luID0gMCxcbiAgICAgICAgICAgIGVuZCA9IGluZGV4LCAgLy8vXG4gICAgICAgICAgICBwcmV2aW91c05vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9ucyA9IG5vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9ucy5zbGljZShiZWdpbiwgZW5kKSxcbiAgICAgICAgICAgIHByZXZpb3VzUHJvZHVjdGlvbnMgPSBwcmV2aW91c05vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9ucywgIC8vL1xuICAgICAgICAgICAgcHJvZHVjdGlvbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlID0gcHJvZHVjdGlvbi5pc0ltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlKHByZXZpb3VzUHJvZHVjdGlvbnMpO1xuXG4gICAgICBpZiAocHJvZHVjdGlvbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlKSB7XG4gICAgICAgIGNvbnN0IG5vbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUHJvZHVjdGlvbiA9IE5vbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUHJvZHVjdGlvbi5mcm9tUHJvZHVjdGlvbkFuZFByZXZpb3VzUHJvZHVjdGlvbnMocHJvZHVjdGlvbiwgcHJldmlvdXNQcm9kdWN0aW9ucyk7XG5cbiAgICAgICAgcHJvZHVjdGlvbiA9IG5vbkltcGxpY2l0bHlMZWZ0UmVjdXJzaXZlUHJvZHVjdGlvbjsgIC8vL1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9kdWN0aW9uTGVmdFJlY3Vyc2l2ZSA9IHByb2R1Y3Rpb24uaXNMZWZ0UmVjdXJzaXZlKCk7XG5cbiAgICAgIGlmIChwcm9kdWN0aW9uTGVmdFJlY3Vyc2l2ZSkge1xuICAgICAgICBjb25zdCBub25MZWZ0UmVjdXJzaXZlUHJvZHVjdGlvbiA9IE5vbkxlZnRSZWN1cnNpdmVQcm9kdWN0aW9uLmZyb21Qcm9kdWN0aW9uKHByb2R1Y3Rpb24pLFxuICAgICAgICAgICAgICByaWdodFJlY3Vyc2l2ZVByb2R1Y3Rpb24gPSBSaWdodFJlY3Vyc2l2ZVByb2R1Y3Rpb24uZnJvbVByb2R1Y3Rpb24ocHJvZHVjdGlvbik7XG5cbiAgICAgICAgbm9uTGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb25zLnB1c2gobm9uTGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb24pO1xuXG4gICAgICAgIHJpZ2h0UmVjdXJzaXZlUHJvZHVjdGlvbnMucHVzaChyaWdodFJlY3Vyc2l2ZVByb2R1Y3Rpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgbm9uTGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb24gPSBwcm9kdWN0aW9uOyAgLy8vXG5cbiAgICAgICAgbm9uTGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb25zLnB1c2gobm9uTGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb24pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcHJvZHVjdGlvbnMgPSBbXS5jb25jYXQobm9uTGVmdFJlY3Vyc2l2ZVByb2R1Y3Rpb25zKS5jb25jYXQocmlnaHRSZWN1cnNpdmVQcm9kdWN0aW9ucyk7XG5cbiAgICByZXR1cm4gcHJvZHVjdGlvbnM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZXJVdGlsO1xuXG5mdW5jdGlvbiBwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb25zRnJvbVByb2R1Y3Rpb25zKHByb2R1Y3Rpb25zKSB7XG4gIGNvbnN0IHBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbnMgPSBwcm9kdWN0aW9ucy5yZWR1Y2UoZnVuY3Rpb24ocG9zc2libHlDeWNsaWNQcm9kdWN0aW9ucywgcHJvZHVjdGlvbikge1xuICAgIGNvbnN0IHBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbiA9IFBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbi5mcm9tUHJvZHVjdGlvbihwcm9kdWN0aW9uKTtcblxuICAgIGlmIChwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb24gIT09IG51bGwpIHtcbiAgICAgIHBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbnMucHVzaChwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb25zO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGdyYXBoRnJvbVBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbnMocG9zc2libHlDeWNsaWNQcm9kdWN0aW9ucykge1xuICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuXG4gIHBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb24pIHtcbiAgICBjb25zdCBwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb25OYW1lID0gcG9zc2libHlDeWNsaWNQcm9kdWN0aW9uLmdldE5hbWUoKSxcbiAgICAgICAgICBwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb25SdWxlc1Byb2R1Y3Rpb25OYW1lcyA9IHBvc3NpYmx5Q3ljbGljUHJvZHVjdGlvbi5nZXRSdWxlc1Byb2R1Y3Rpb25OYW1lcygpLFxuICAgICAgICAgIHZlcnRleE5hbWUgPSBwb3NzaWJseUN5Y2xpY1Byb2R1Y3Rpb25OYW1lLCAgLy8vXG4gICAgICAgICAgZGVzY2VuZGFudFZlcnRleE5hbWVzID0gcG9zc2libHlDeWNsaWNQcm9kdWN0aW9uUnVsZXNQcm9kdWN0aW9uTmFtZXM7IC8vL1xuXG4gICAgZ3JhcGguYWRkVmVydGV4KHZlcnRleE5hbWUsIGRlc2NlbmRhbnRWZXJ0ZXhOYW1lcyk7XG4gIH0pO1xuXG4gIHJldHVybiBncmFwaDtcbn1cbiJdfQ==