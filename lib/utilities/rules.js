"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    rulesAsString: function() {
        return rulesAsString;
    },
    ruleMapFromRules: function() {
        return ruleMapFromRules;
    },
    startRuleFromRules: function() {
        return startRuleFromRules;
    },
    rulesFromStartRuleAndRuleMap: function() {
        return rulesFromStartRuleAndRuleMap;
    },
    startRuleFromRulesAndStartRuleName: function() {
        return startRuleFromRulesAndStartRuleName;
    },
    default: function() {
        return _default;
    }
});
var _necessary = require("necessary");
var _constants = require("../constants");
var first = _necessary.arrayUtilities.first, filter = _necessary.arrayUtilities.filter;
function rulesAsString(rules, multiLine) {
    var maximumRuleNameLength = rules.reduce(function(maximumRuleNameLength, rule) {
        var ruleName = rule.getName(), ruleNameLength = ruleName.length;
        maximumRuleNameLength = Math.max(maximumRuleNameLength, ruleNameLength);
        return maximumRuleNameLength;
    }, 0), rulesString = rules.reduce(function(rulesString, rule) {
        var ruleString = rule.asString(maximumRuleNameLength, multiLine);
        rulesString += ruleString;
        return rulesString;
    }, _constants.EMPTY_STRING).replace(/^\n\n/, _constants.EMPTY_STRING);
    return rulesString;
}
function ruleMapFromRules(rules) {
    var ruleMap = {};
    rules.forEach(function(rule) {
        var ruleName = rule.getName();
        ruleMap[ruleName] = rule;
    });
    return ruleMap;
}
function startRuleFromRules(rules) {
    var firstRule = first(rules), startRule = firstRule; ///
    return startRule;
}
function rulesFromStartRuleAndRuleMap(startRule, ruleMap) {
    var rules = Object.values(ruleMap), startRuleName = startRule.getName();
    filter(rules, function(rule) {
        var ruleName = rule.getName();
        if (ruleName !== startRuleName) {
            return true;
        }
    });
    rules.unshift(startRule);
    return rules;
}
function startRuleFromRulesAndStartRuleName(rules, startRuleName) {
    var startRule = rules.find(function(rule) {
        var ruleName = rule.getName();
        if (ruleName === startRuleName) {
            return true;
        }
    }) || null; ///
    if (startRule === null) {
        startRule = startRuleFromRules(rules);
    }
    return startRule;
}
var _default = {
    rulesAsString: rulesAsString,
    ruleMapFromRules: ruleMapFromRules,
    startRuleFromRules: startRuleFromRules,
    rulesFromStartRuleAndRuleMap: rulesFromStartRuleAndRuleMap,
    startRuleFromRulesAndStartRuleName: startRuleFromRulesAndStartRuleName
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcnVsZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5jb25zdCB7IGZpcnN0LCBmaWx0ZXIgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5pbXBvcnQgeyBFTVBUWV9TVFJJTkcgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBydWxlc0FzU3RyaW5nKHJ1bGVzLCBtdWx0aUxpbmUpIHtcbiAgY29uc3QgbWF4aW11bVJ1bGVOYW1lTGVuZ3RoID0gcnVsZXMucmVkdWNlKChtYXhpbXVtUnVsZU5hbWVMZW5ndGgsIHJ1bGUpID0+IHtcbiAgICAgICAgY29uc3QgcnVsZU5hbWUgPSBydWxlLmdldE5hbWUoKSxcbiAgICAgICAgICAgICAgcnVsZU5hbWVMZW5ndGggPSBydWxlTmFtZS5sZW5ndGg7XG5cbiAgICAgICAgbWF4aW11bVJ1bGVOYW1lTGVuZ3RoID0gTWF0aC5tYXgobWF4aW11bVJ1bGVOYW1lTGVuZ3RoLCBydWxlTmFtZUxlbmd0aCk7XG5cbiAgICAgICAgcmV0dXJuIG1heGltdW1SdWxlTmFtZUxlbmd0aDtcbiAgICAgIH0sIDApLFxuICAgICAgcnVsZXNTdHJpbmcgPSBydWxlcy5yZWR1Y2UoKHJ1bGVzU3RyaW5nLCBydWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJ1bGVTdHJpbmcgPSBydWxlLmFzU3RyaW5nKG1heGltdW1SdWxlTmFtZUxlbmd0aCwgbXVsdGlMaW5lKTtcblxuICAgICAgICBydWxlc1N0cmluZyArPSBydWxlU3RyaW5nO1xuXG4gICAgICAgIHJldHVybiBydWxlc1N0cmluZztcbiAgICAgIH0sIEVNUFRZX1NUUklORykucmVwbGFjZSgvXlxcblxcbi8sIEVNUFRZX1NUUklORyk7XG5cbiAgcmV0dXJuIHJ1bGVzU3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcnVsZU1hcEZyb21SdWxlcyhydWxlcykge1xuICBjb25zdCBydWxlTWFwID0ge307XG5cbiAgcnVsZXMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICAgIGNvbnN0IHJ1bGVOYW1lID0gcnVsZS5nZXROYW1lKCk7XG5cbiAgICBydWxlTWFwW3J1bGVOYW1lXSA9IHJ1bGU7XG4gIH0pO1xuXG4gIHJldHVybiBydWxlTWFwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRSdWxlRnJvbVJ1bGVzKHJ1bGVzKSB7XG4gIGNvbnN0IGZpcnN0UnVsZSA9IGZpcnN0KHJ1bGVzKSxcbiAgICAgICAgc3RhcnRSdWxlID0gZmlyc3RSdWxlOyAgLy8vXG5cbiAgcmV0dXJuIHN0YXJ0UnVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJ1bGVzRnJvbVN0YXJ0UnVsZUFuZFJ1bGVNYXAoc3RhcnRSdWxlLCBydWxlTWFwKSB7XG4gIGNvbnN0IHJ1bGVzID0gT2JqZWN0LnZhbHVlcyhydWxlTWFwKSxcbiAgICAgICAgc3RhcnRSdWxlTmFtZSA9IHN0YXJ0UnVsZS5nZXROYW1lKCk7XG5cbiAgZmlsdGVyKHJ1bGVzLCAocnVsZSkgPT4ge1xuICAgIGNvbnN0IHJ1bGVOYW1lID0gcnVsZS5nZXROYW1lKCk7XG5cbiAgICBpZiAocnVsZU5hbWUgIT09IHN0YXJ0UnVsZU5hbWUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcnVsZXMudW5zaGlmdChzdGFydFJ1bGUpO1xuXG4gIHJldHVybiBydWxlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0UnVsZUZyb21SdWxlc0FuZFN0YXJ0UnVsZU5hbWUocnVsZXMsIHN0YXJ0UnVsZU5hbWUpIHtcbiAgbGV0IHN0YXJ0UnVsZSA9IHJ1bGVzLmZpbmQoKHJ1bGUpID0+IHtcbiAgICBjb25zdCBydWxlTmFtZSA9IHJ1bGUuZ2V0TmFtZSgpO1xuXG4gICAgaWYgKHJ1bGVOYW1lID09PSBzdGFydFJ1bGVOYW1lKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pIHx8IG51bGw7IC8vL1xuXG4gIGlmIChzdGFydFJ1bGUgPT09IG51bGwpIHtcbiAgICBzdGFydFJ1bGUgPSBzdGFydFJ1bGVGcm9tUnVsZXMocnVsZXMpO1xuICB9XG5cbiAgcmV0dXJuIHN0YXJ0UnVsZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBydWxlc0FzU3RyaW5nLFxuICBydWxlTWFwRnJvbVJ1bGVzLFxuICBzdGFydFJ1bGVGcm9tUnVsZXMsXG4gIHJ1bGVzRnJvbVN0YXJ0UnVsZUFuZFJ1bGVNYXAsXG4gIHN0YXJ0UnVsZUZyb21SdWxlc0FuZFN0YXJ0UnVsZU5hbWVcbn07XG4iXSwibmFtZXMiOlsicnVsZXNBc1N0cmluZyIsInJ1bGVNYXBGcm9tUnVsZXMiLCJzdGFydFJ1bGVGcm9tUnVsZXMiLCJydWxlc0Zyb21TdGFydFJ1bGVBbmRSdWxlTWFwIiwic3RhcnRSdWxlRnJvbVJ1bGVzQW5kU3RhcnRSdWxlTmFtZSIsImZpcnN0IiwiYXJyYXlVdGlsaXRpZXMiLCJmaWx0ZXIiLCJydWxlcyIsIm11bHRpTGluZSIsIm1heGltdW1SdWxlTmFtZUxlbmd0aCIsInJlZHVjZSIsInJ1bGUiLCJydWxlTmFtZSIsImdldE5hbWUiLCJydWxlTmFtZUxlbmd0aCIsImxlbmd0aCIsIk1hdGgiLCJtYXgiLCJydWxlc1N0cmluZyIsInJ1bGVTdHJpbmciLCJhc1N0cmluZyIsIkVNUFRZX1NUUklORyIsInJlcGxhY2UiLCJydWxlTWFwIiwiZm9yRWFjaCIsImZpcnN0UnVsZSIsInN0YXJ0UnVsZSIsIk9iamVjdCIsInZhbHVlcyIsInN0YXJ0UnVsZU5hbWUiLCJ1bnNoaWZ0IiwiZmluZCJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7Ozs7Ozs7OztJQVFHQSxhQUFhO2VBQWJBLGFBQWE7O0lBb0JiQyxnQkFBZ0I7ZUFBaEJBLGdCQUFnQjs7SUFZaEJDLGtCQUFrQjtlQUFsQkEsa0JBQWtCOztJQU9sQkMsNEJBQTRCO2VBQTVCQSw0QkFBNEI7O0lBaUI1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